<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">

<html>
<head>
	<title>lorisplay</title>
	 <LINK REL="stylesheet" TYPE="text/css" HREF="../manual.css" TITLE="formal">
</head>

<body bgcolor="white">
<!--
[[table  align="right" cellpadding="1" cellspacing="1" border="0"]]
	[[tr]]
		[[td width="45" align="right"]]
			[[a href="../manual2.htm#contents" target="_parent"]][[img src="../toc.gif" width="38" height="18" alt="Use Non-Frames Version" border="0"]][[/a]]
		[[/td]]
		[[td width="10"]][[/td]]
		[[td width="45" align="right"]]
			[[a href="guiro.htm"]][[img src="../prev.gif" width="38" height="18" alt="Previous Page" border="0"]][[/a]]
		[[/td]]
		[[td width="45" align="right"]]
			[[a href="pvread.htm"]][[img src="../next.gif" width="38" height="18" alt="Next Page" border="0"]][[/a]]
		[[/td]]
	[[/tr]]
[[/table]]
-->
Signal Generators: Bandwidth-Enhanced Additive Resynthesis, Sound Morphing

<hr size="1" color="#A9A9A9" noshade>

<h2>lorisplay</h2>
<pre>
  ar  <strong>lorismorph</strong>   ktimpnt, ifilcod0, ifilcod1, kfreqmorphenv, kampmorphenv, kbwmorphenv[, ifadetime]
</pre>
<hr size="2" color="#A9A9A9" noshade>

<h3>Description</h3>

<p>Output of <strong>lorismorph</strong> is the
<em>Bandwidth-Enhanced</em> additive synthesis of a <em>morph</em>
between two sets of partials, obtained from a <em>Reassigned
Bandwidth-Enhanced Analysis</em> performed using the
<strong>Loris</strong> software. The partials are imported from a
SDIF-format data file, and morphed according to a set of control-rate
frequency, amplitude, and bandwidth morphing envelopes.
</p>
<p>For more information about sound morphing using the <em>Reassigned
Bandwidth-Enhanced Additive Model</em> and <strong>Loris</strong>, visit
the <strong>Loris</strong> web site at <a
href="www.cerlsoundgroup.org/Loris/">www.cerlsoundgroup.org/Loris/</a>
</p>

<h3>Initialization</h3>

<p><em>ifilcod0, ifilcod1</em> &#8211; integer or character-string
denoting a control-file derived from reassigned bandwidth-enhanced
analysis of an audio signal. An integer denotes the suffix of a file
<em>loris.sdif</em> (e.g. <em>loris.sdif.1</em>); a character-string (in
double quotes) gives a filename, optionally a full pathname. If not
fullpath, the file is sought first in the current directory, then in the
one given by the environment variable <strong>SADIR</strong> (if defined).
</p>
<p> The <strong>lorismorph</strong> control files contain breakpoint
frequency, amplitude, noisiness, and phase envelope values organized for
bandwidth-enhanced additive resynthesis. The control data must conform
to one of the SDIF formats that can be interpreted using the
<strong>Loris</strong> library for sound modeling and manipulation.
Memory usage depends on the size of the files involved, which are read
and held entirely in memory during computation but are shared by
multiple calls. 
</p>

<p> <strong>Loris</strong> stores partials in SDIF RBEP frames. Each
RBEP frame contains one RBEP matrix, and each row in a RBEP matrix
describes one breakpoint in a <strong>Loris</strong> partial. A RBEL
frame containing one RBEL matrix describing the labeling of the partials
may precede the first RBEP frame in the SDIF file. The RBEP and RBEL
frame and matrix definitions are included in the SDIF file's header. In
addition to RBEP frames, <strong>Loris</strong> can also read and write
SDIF 1TRC frames.  Since 1TRC frames do not represent
bandwidth-enhancement or the exact timing of <strong>Loris</strong>
breakpoints, their use is not recommended. 1TRC capabilities are
provided to allow interchange with programs that are unable to handle
RBEP frames.
</p>

<p><em>ifadetime</em> (optional) &#8211; In general, partials exported
from <strong>Loris</strong> begin and end at non-zero amplitude. In
order to prevent artifacts, it is very often necessary to fade the
partials in and out, instead of turning them abruptly on and off.
Specification of a non-zero <em>ifadetime</em> causes partials to fade
in at their onsets and to fade out at their terminations. This is
achieved by adding two more breakpoints to each partial: one
<em>ifadetime</em> seconds before the start time and another
<em>ifadetime</em> seconds after the end time. (However, no breakpoint
will be introduced at a time less than zero. If necessary, the onset
fade time will be shortened.) The additional breakpoints at the partial
onset and termination will have the same frequency and bandwidth as the
first and last breakpoints in the partial, respectively, but their
amplitudes will be zero. The phase of the new breakpoints will be
extrapolated to preserve phase correctness. If no value is specified,
<em>ifadetime</em> defaults to zero. Note that the fadetime may not be
exact, since the partial parameter envelopes are sampled at the control
rate (krate) and indexed by <em>ktimpnt</em> (see below), and not by
real time. 
</p>


<h3>Performance</h3>
<p><strong>lorismorph</strong> generates and renders a set of
bandwidth-enhanced partials by morphing the partials imported from the
control files <em>ifilcod0</em> and <em>ifilcod1</em>. The control data
stems from pre-computed analysis files stored in SDIF format, as
described above. The passage of time through these files is specified by
<em>ktimpnt</em>, which represents the time in seconds. <em>ktimpnt</em>
must always be positive, but can move forwards or backwards in time, be
stationary or discontinuous, as a pointer into the analysis file.
</p>

<p>The sound morph is described by three control-rate morphing
envelopes. The morph is performed by interpolating the parameters of
corresponding (labeled) partials in the two source sounds (for a full
explanation, visit the <strong>Loris</strong> web site at <a
href="www.cerlsoundgroup.org/Loris/">www.cerlsoundgroup.org/Loris/</a>).
<em>kfreqmorphenv</em> describes the interpolation of partial frequency
values in the two source sounds. When <em>kfreqmorphenv</em> is 0,
partial frequencies are obtained from the partials in <em>ifilcod0</em>.
When <em>kfreqmorphenv</em> is 1, partial frequencies are obtained from
the partials in <em>ifilcod1</em>. When <em>kfreqmorphenv</em> is
between 0 and 1, the partial frequencies are interpolated between the
two sources. Interpolation of partial amplitudes and bandwidth
(noisiness) coefficients are similarly described by
<em>kampmorphenv</em> and <em>kbwmorphenv</em>.
</p>


<p>This implementation of <strong>lorismorph</strong> was orignally
written by Kelly Fitz. It is patterned after the
<strong>lorisplay</strong> unit generator, originally written by Corbin
Champion. <strong>lorismorph</strong> is based on the method of
<em>Bandwidth-Enhanced Additive Synthesis</em> and on the sound morphing
algorithms implemented in the <strong>Loris</strong> library for sound
modeling and manipulation. For more information about
<em>Bandwidth-Enhanced Additive Synthesis</em>, <em>Reassigned
Bandwidth-Enhanced Additive Model</em>, and <strong>Loris</strong>,
visit the <strong>Loris</strong> web site at <a
href="www.cerlsoundgroup.org/Loris/">www.cerlsoundgroup.org/Loris/</a>
</p>

<h3>Examples</h3>
<p>Example 1
</p>
<pre><em>;
; Morph the partials in carhorn.sdif into
; the partials in meow.sdif linearly over 
; all but the last 2 seconds of the note.
; The morph is performed over the first 
; .75 seconds of the source sounds. The last
; 2.5 seconds (of meow) is unmodified.
; Use 1 ms fade time.
;</em>
instr 1
    ktime    <strong>linseg</strong>      0, p3-2.5, 0.75, 2.5, 3.5   <em>; time index function</em>
    kmorph   <strong>linseg</strong>      0, p3-2.5, 1.0, 2.5, 1.0    <em>; morphing function</em>
    asig     <strong>lorismorph</strong>  ktime, "carhorn.sdif", "meow.sdif", kmorph, kmorph, kmorph, .001
             <strong>out</strong>         asig
endin
</pre>

<p> The instrument in Example 1 performs a sound morph between a carhorn
and a cat's meow using reassigned bandwidth-enhanced partials stored in
"carhorn.sdif" and "meow.sdif." The morph is performed over all but the
last two seconds of the note, since <code>kmorph</code> changes from 
0 to 1 over <code>p3-2.5</code> seconds, and then remains constant (1.0)
for the remainder of the note. <code>ktime</code> changes from 0 to 0.75 over the
first <code>p3-2.5</code> seconds, so the morph is performed using the
first 0.75 seconds of the source partials. The remainder of the note
(2.5 seconds) uses only the partials from "meow.sdif."
</p>

<h3>Author</h3>
<p>Kelly Fitz<br>
WSU, Pullman<br>
2002<br>
email:<a href="mailto:loris@cerlsoundgroup.org">loris@cerlsoundgroup.org</a></p>

<p>
Last update: 14 May 2002
</p>

<hr size="2" color="#A9A9A9" noshade>
<!--
[[table  align="right" cellpadding="1" cellspacing="1" border="0"]]
	[[tr]]
		[[td width="45" align="right"]]
			[[a href="../manual2.htm#contents" target="_parent"]][[img src="../toc.gif" width="38" height="18" alt="Use Non-Frames Version" border="0"]][[/a]]
		[[/td]]
		[[td width="10"]][[/td]]
		[[td width="45" align="right"]]
			[[a href="guiro.htm"]][[img src="../prev.gif" width="38" height="18" alt="Previous Page" border="0"]][[/a]]
		[[/td]]
		[[td width="45" align="right"]]
			[[a href="pvread.htm"]][[img src="../next.gif" width="38" height="18" alt="Next Page" border="0"]][[/a]]
		[[/td]]
	[[/tr]]
[[/table]]
-->
Signal Generators: Bandwidth-Enhanced Additive Resynthesis, Sound Morphing
</body>

</html>
